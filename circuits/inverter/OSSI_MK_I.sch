EESchema Schematic File Version 2
LIBS:lm317
LIBS:kv30f
LIBS:OSSI_standard_components
LIBS:connectors
LIBS:lm4030
LIBS:power
LIBS:acs722
LIBS:OSSI_MK_I-cache
EELAYER 25 0
EELAYER END
$Descr A3 16535 11693
encoding utf-8
Sheet 1 11
Title "OSSI main circuit"
Date "2016-03-04"
Rev "0.1"
Comp "Open Source Solar Inverter Project"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 2650 1250 1850 1450
U 56D9AF24
F0 "DC input terminal and filter" 60
F1 "DC_input.sch" 60
F2 "DC+" O R 4500 1600 60 
F3 "DC-_Shunt+" I R 4500 2600 60 
$EndSheet
Text Notes 750  1350 0    60   ~ 0
Inverter Terminals and DC Switch
$Sheet
S 5000 1250 2000 1450
U 56D9BE97
F0 "DC boost converter and buffer" 60
F1 "DC_booster.sch" 60
F2 "DC+" I L 5000 1600 60 
F3 "DC_link+" O R 7000 1600 60 
F4 "Boost_T1" I L 5000 2100 60 
$EndSheet
$Sheet
S 7450 1250 1850 1450
U 56D9C185
F0 "Inverter Bridge" 60
F1 "inverter.sch" 60
F2 "DC_link+" I L 7450 1600 60 
F3 "AC_Vtg_L" O R 9300 1800 60 
F4 "AC_Vtg_N" O R 9300 2050 60 
$EndSheet
$Sheet
S 9850 1200 1850 1450
U 56D9C18A
F0 "AC output filter" 60
F1 "AC_filter.sch" 60
F2 "AC_Inverter_Vtg_N" O R 11700 1400 60 
F3 "AC_Inverter_Vtg_L" O R 11700 1300 60 
F4 "AC_Vtg_N" I L 9850 2050 60 
F5 "AC_Vtg_L" I L 9850 1800 60 
$EndSheet
$Sheet
S 13150 1225 1850 1450
U 56D9C195
F0 "AC switch circuit" 60
F1 "AC_switch.sch" 60
F2 "Relay_Voltage_Ctrl" I L 13150 2350 60 
F3 "Inv_Relay_Ctrl" I L 13150 2450 60 
F4 "Grid_Relay_Ctrl" I L 13150 2550 60 
F5 "Relay_Ctrl_Vtg" O L 13150 1650 60 
F6 "AC_Grid_Vtg_L" O L 13150 2100 60 
F7 "AC_Grid_Vtg_N" O L 13150 2000 60 
F8 "AC_Relay_Vtg_L" O L 13150 1900 60 
F9 "AC_Relay_Vtg_N" O L 13150 1800 60 
F10 "AC_Inverter_Vtg_L" I L 13150 1300 60 
F11 "AC_Inverter_Vtg_N" I L 13150 1400 60 
$EndSheet
$Sheet
S 8900 4150 1850 1000
U 56D9D1EC
F0 "AC Bridge Driver " 60
F1 "drivers.sch" 60
$EndSheet
$Sheet
S 1850 5350 2450 1600
U 56D9D375
F0 "Analog Frontend" 60
F1 "analog_frontend.sch" 60
F2 "DC_Input_Voltage" O R 4300 5650 60 
F3 "DC_Input_Vtg" I L 1850 6650 60 
F4 "DC_Link_Voltage" O R 4300 5950 60 
F5 "DC_Link_Vtg" I L 1850 6550 60 
F6 "1V25_REF" I R 4300 5450 60 
F7 "AC_Grid_Voltage" O R 4300 6600 60 
F8 "AC_Grid_Vtg_L" I L 1850 5500 60 
F9 "AC_Inverter_Voltage" O R 4300 6150 60 
F10 "AC_Inverter_Vtg_L" I L 1850 6100 60 
F11 "AC_Relay_Voltage" O R 4300 6450 60 
F12 "AC_Relay_Vtg_L" I L 1850 5700 60 
F13 "Relay_Ctrl_Voltage" O R 4300 6800 60 
F14 "Relay_Ctrl_Vtg" I L 1850 5950 60 
F15 "AC_Grid_Vtg_N" I L 1850 5600 60 
F16 "AC_Inverter_Vtg_N" I L 1850 6200 60 
F17 "AC_Relay_Vtg_N" I L 1850 5800 60 
F18 "DC_Current" O R 4300 5800 60 
F19 "DC-_Shunt" O L 1850 6800 60 
F20 "AC_Cur_In" I L 1850 6300 60 
F21 "AC_Cur_Out" O L 1850 6400 60 
F22 "AC_Current" O R 4300 6300 60 
$EndSheet
$Sheet
S 1850 7850 1400 1100
U 56D9D68D
F0 "Power Supply" 60
F1 "power_supply.sch" 60
F2 "DC_Link_Vtg" I L 1850 8000 60 
$EndSheet
$Sheet
S 5450 5200 2900 2200
U 56D9D692
F0 "Main Controller" 60
F1 "main_controller.sch" 60
F2 "1V25_REF" O L 5450 5450 60 
F3 "DC_Link_Voltage" I L 5450 5950 60 
F4 "AC_Grid_Voltage" I L 5450 6600 60 
F5 "AC_Current" I L 5450 6300 60 
F6 "AC_Relay_Voltage" I L 5450 6450 60 
F7 "DC_Input_Voltage" I L 5450 5650 60 
F8 "DC_Current" I L 5450 5800 60 
F9 "AC_Inverter_Voltage" I L 5450 6150 60 
F10 "Relay_Ctrl_Voltage" I L 5450 6800 60 
F11 "UART_RX" I R 8350 7150 60 
F12 "UART_TX" O R 8350 7250 60 
F13 "Bridge_T1" O R 8350 5450 60 
F14 "Bridge_T2" O R 8350 5550 60 
F15 "Bridge_T3" O R 8350 5650 60 
F16 "Bridge_T4" O R 8350 5750 60 
F17 "Boost_T1" O R 8350 5300 60 
F18 "Relay_Voltage_Ctrl" O R 8350 6000 60 
F19 "I2C_Clk" O R 8350 6450 60 
F20 "I2C_Dat" O R 8350 6550 60 
F21 "LED_Red_Ctrl" O R 8350 6800 60 
F22 "LED_Green_Ctrl" O R 8350 6900 60 
F23 "Inv_Relay_Ctrl" O R 8350 6100 60 
F24 "Grid_Relay_Ctrl" O R 8350 6200 60 
F25 "2V50_REF" O L 5450 5300 60 
$EndSheet
Wire Notes Line
	3600 2250 3600 2500
Wire Notes Line
	3550 2000 3600 2250
Wire Notes Line
	3500 1850 3550 2000
Wire Notes Line
	3400 1750 3500 1850
Wire Notes Line
	3300 1700 3400 1750
Wire Notes Line
	3200 1700 3300 1700
Wire Notes Line
	3200 2500 4000 2500
Wire Notes Line
	3200 1550 3200 2500
Wire Notes Line
	3100 2550 3100 1500
Wire Notes Line
	4100 2550 3100 2550
Wire Notes Line
	4100 1500 4100 2550
Wire Notes Line
	3100 1500 4100 1500
Wire Notes Line
	2950 2150 2850 2150
Wire Notes Line
	2950 2250 2950 2150
Wire Notes Line
	2850 2250 2950 2250
Wire Notes Line
	2850 2150 2850 2250
Wire Notes Line
	2850 1950 2850 1850
Wire Notes Line
	2950 1950 2850 1950
Wire Notes Line
	2950 1850 2950 1950
Wire Notes Line
	2850 1850 2950 1850
Wire Notes Line
	1450 1650 1550 1650
Wire Notes Line
	1500 2150 1500 1650
Wire Notes Line
	1600 2200 2850 2200
Wire Notes Line
	1400 2100 1600 2200
Wire Notes Line
	1600 1900 2850 1900
Wire Notes Line
	1400 1800 1600 1900
Wire Notes Line
	1150 2200 1400 2200
Wire Notes Line
	1150 2500 1150 2200
Wire Notes Line
	900  2500 1150 2500
Wire Notes Line
	1150 1900 1400 1900
Wire Notes Line
	1150 1600 1150 1900
Wire Notes Line
	900  1600 1150 1600
Wire Notes Line
	900  2600 800  2600
Wire Notes Line
	900  2400 900  2600
Wire Notes Line
	800  2400 900  2400
Wire Notes Line
	900  1700 800  1700
Wire Notes Line
	900  1500 900  1700
Wire Notes Line
	800  1500 900  1500
Wire Notes Line
	700  2800 700  1200
Wire Notes Line
	2300 2800 700  2800
Wire Notes Line
	2300 1200 2300 2800
Wire Notes Line
	700  1200 2300 1200
Wire Notes Line
	5400 1450 6450 1450
Wire Notes Line
	6450 1450 6450 2500
Wire Notes Line
	6450 2500 5400 2500
Wire Notes Line
	5400 2500 5400 1450
Wire Notes Line
	5450 1600 5550 1600
Wire Notes Line
	5550 1550 5550 1650
Wire Notes Line
	5550 1550 5750 1550
Wire Notes Line
	5750 1550 5750 1650
Wire Notes Line
	5750 1650 5550 1650
Wire Notes Line
	5750 1600 6400 1600
Wire Notes Line
	6250 1550 6250 1650
Wire Notes Line
	6250 1600 6150 1550
Wire Notes Line
	6150 1550 6150 1650
Wire Notes Line
	6150 1650 6250 1600
Wire Notes Line
	6000 1600 6000 1950
Wire Notes Line
	6000 1950 5900 2050
Wire Notes Line
	5900 2050 5900 2200
Wire Notes Line
	5900 2200 6000 2300
Wire Notes Line
	6000 2300 6000 2450
Wire Notes Line
	5950 2450 6050 2450
Wire Notes Line
	6000 2300 5975 2225
Wire Notes Line
	5975 2225 5925 2275
Wire Notes Line
	5925 2275 6000 2300
Wire Notes Line
	5900 2125 5700 2125
Wire Notes Line
	5550 1525 5750 1525
Wire Notes Line
	8100 1600 8100 1700
Wire Notes Line
	8100 1700 8150 1750
Wire Notes Line
	8150 1750 8150 2100
Wire Notes Line
	8150 2100 8100 2150
Wire Notes Line
	8100 2150 8100 2250
Wire Notes Line
	8100 2250 8150 2300
Wire Notes Line
	8150 2300 8150 2550
Wire Notes Line
	8100 1600 8150 1550
Wire Notes Line
	8150 1550 8150 1450
Wire Notes Line
	10850 2250 10850 2500
Wire Notes Line
	10800 2000 10850 2250
Wire Notes Line
	10750 1850 10800 2000
Wire Notes Line
	10650 1750 10750 1850
Wire Notes Line
	10550 1700 10650 1750
Wire Notes Line
	10450 1700 10550 1700
Wire Notes Line
	10450 2500 11250 2500
Wire Notes Line
	10450 1550 10450 2500
Wire Notes Line
	10350 2550 10350 1500
Wire Notes Line
	11350 2550 10350 2550
Wire Notes Line
	11350 1500 11350 2550
Wire Notes Line
	10350 1500 11350 1500
Wire Notes Line
	8600 1600 8600 1700
Wire Notes Line
	8600 1700 8650 1750
Wire Notes Line
	8650 1750 8650 2100
Wire Notes Line
	8650 2100 8600 2150
Wire Notes Line
	8600 2150 8600 2250
Wire Notes Line
	8600 2250 8650 2300
Wire Notes Line
	8650 2300 8650 2550
Wire Notes Line
	8600 1600 8650 1550
Wire Notes Line
	8650 1550 8650 1450
Wire Notes Line
	8650 1450 7800 1450
Wire Notes Line
	8650 2550 7800 2550
Wire Notes Line
	8100 1650 8000 1650
Wire Notes Line
	8100 2200 8000 2200
Wire Notes Line
	8600 1650 8500 1650
Wire Notes Line
	8600 2200 8500 2200
Wire Notes Line
	8150 1850 9100 1850
Wire Notes Line
	8650 2000 9100 2000
Wire Notes Line
	13850 1575 14200 1575
Wire Notes Line
	13850 2025 14200 2025
Wire Notes Line
	14200 1575 14400 1475
Wire Notes Line
	14200 2025 14350 1925
Wire Notes Line
	14350 2025 14750 2025
Wire Notes Line
	14400 1575 14750 1575
Wire Notes Line
	14300 1525 14300 2225
Wire Notes Line
	14200 2225 14400 2225
Wire Notes Line
	14400 2225 14400 2325
Wire Notes Line
	14400 2325 14200 2325
Wire Notes Line
	14200 2325 14200 2225
Wire Notes Line
	14350 2225 14250 2325
Wire Notes Line
	14750 1525 14750 1625
Wire Notes Line
	14750 1625 14850 1625
Wire Notes Line
	14850 1625 14850 1525
Wire Notes Line
	14850 1525 14750 1525
Wire Notes Line
	14750 1975 14750 2075
Wire Notes Line
	14750 2075 14850 2075
Wire Notes Line
	14850 2075 14850 1975
Wire Notes Line
	14850 1975 14750 1975
Wire Notes Line
	2950 5400 3150 5500
Wire Notes Line
	3150 5500 2950 5600
Wire Notes Line
	2950 5600 2950 5400
Wire Notes Line
	2950 5450 2850 5450
Wire Notes Line
	2950 5550 2850 5550
Wire Notes Line
	3150 5500 3250 5500
Wire Notes Line
	2950 5650 3150 5750
Wire Notes Line
	3150 5750 2950 5850
Wire Notes Line
	2950 5850 2950 5650
Wire Notes Line
	2950 5700 2850 5700
Wire Notes Line
	2950 5800 2850 5800
Wire Notes Line
	3150 5750 3250 5750
Wire Notes Line
	2950 5900 3150 6000
Wire Notes Line
	3150 6000 2950 6100
Wire Notes Line
	2950 6100 2950 5900
Wire Notes Line
	2950 5950 2850 5950
Wire Notes Line
	2950 6050 2850 6050
Wire Notes Line
	3150 6000 3250 6000
Wire Notes Line
	9500 4250 9700 4350
Wire Notes Line
	9700 4350 9500 4450
Wire Notes Line
	9500 4450 9500 4250
Wire Notes Line
	9700 4350 9800 4350
Wire Notes Line
	9500 4350 9400 4350
Wire Notes Line
	9500 4550 9700 4650
Wire Notes Line
	9700 4650 9500 4750
Wire Notes Line
	9500 4750 9500 4550
Wire Notes Line
	9700 4650 9800 4650
Wire Notes Line
	9500 4650 9400 4650
Wire Notes Line
	9500 4850 9700 4950
Wire Notes Line
	9700 4950 9500 5050
Wire Notes Line
	9500 5050 9500 4850
Wire Notes Line
	9700 4950 9800 4950
Wire Notes Line
	9500 4950 9400 4950
Wire Notes Line
	9950 4350 10150 4450
Wire Notes Line
	10150 4450 9950 4550
Wire Notes Line
	9950 4550 9950 4350
Wire Notes Line
	10150 4450 10250 4450
Wire Notes Line
	9950 4450 9850 4450
Wire Notes Line
	9950 4750 10150 4850
Wire Notes Line
	10150 4850 9950 4950
Wire Notes Line
	9950 4950 9950 4750
Wire Notes Line
	10150 4850 10250 4850
Wire Notes Line
	9950 4850 9850 4850
Wire Wire Line
	4300 6600 5450 6600
Wire Wire Line
	4300 6800 5450 6800
Wire Wire Line
	4300 6450 5450 6450
Wire Wire Line
	4300 6300 5450 6300
Wire Wire Line
	4300 6150 5450 6150
Wire Wire Line
	4300 5950 5450 5950
Wire Wire Line
	4300 5800 5450 5800
Wire Wire Line
	4300 5650 5450 5650
Wire Wire Line
	4300 5450 5450 5450
Wire Notes Line
	2950 6150 3150 6250
Wire Notes Line
	3150 6250 2950 6350
Wire Notes Line
	2950 6350 2950 6150
Wire Notes Line
	2950 6200 2850 6200
Wire Notes Line
	2950 6300 2850 6300
Wire Notes Line
	3150 6250 3250 6250
Wire Notes Line
	2950 6400 3150 6500
Wire Notes Line
	3150 6500 2950 6600
Wire Notes Line
	2950 6600 2950 6400
Wire Notes Line
	2950 6450 2850 6450
Wire Notes Line
	2950 6550 2850 6550
Wire Notes Line
	3150 6500 3250 6500
Wire Notes Line
	2950 6650 3150 6750
Wire Notes Line
	3150 6750 2950 6850
Wire Notes Line
	2950 6850 2950 6650
Wire Notes Line
	2950 6700 2850 6700
Wire Notes Line
	2950 6800 2850 6800
Wire Notes Line
	3150 6750 3250 6750
Wire Wire Line
	4500 1600 5000 1600
Wire Wire Line
	1850 6800 1000 6800
Wire Wire Line
	1000 6800 1000 2900
Wire Wire Line
	1000 2900 4600 2900
Wire Wire Line
	4600 2900 4600 2600
Wire Wire Line
	4600 2600 4500 2600
Wire Wire Line
	5000 2100 4900 2100
Wire Wire Line
	4900 2100 4900 5000
Wire Wire Line
	4900 5000 8500 5000
Wire Wire Line
	8500 5000 8500 5300
Wire Wire Line
	8500 5300 8350 5300
Wire Wire Line
	1850 6650 1100 6650
Wire Wire Line
	1100 6650 1100 3000
Wire Wire Line
	1100 3000 4700 3000
Wire Wire Line
	4700 3000 4700 1600
Connection ~ 4700 1600
Wire Wire Line
	7000 1600 7450 1600
Wire Wire Line
	7200 1600 7200 1000
Wire Wire Line
	7200 1000 4800 1000
Wire Wire Line
	4800 1000 4800 3100
Wire Wire Line
	4800 3100 1200 3100
Wire Wire Line
	1200 3100 1200 8000
Wire Wire Line
	1200 6550 1850 6550
Connection ~ 7200 1600
Wire Notes Line
	5700 2050 5550 2050
Wire Notes Line
	5550 2050 5550 2200
Wire Notes Line
	5550 2200 5700 2200
Wire Notes Line
	5700 2200 5700 2050
Wire Notes Line
	5675 2125 5600 2075
Wire Notes Line
	5600 2075 5600 2175
Wire Notes Line
	5600 2175 5675 2125
Wire Wire Line
	8350 6000 12800 6000
Wire Wire Line
	12800 6000 12800 2350
Wire Wire Line
	12800 2350 13150 2350
Wire Wire Line
	13150 2450 12900 2450
Wire Wire Line
	12900 2450 12900 6100
Wire Wire Line
	13150 2550 13000 2550
Wire Wire Line
	13000 2550 13000 6200
Wire Wire Line
	12900 6100 8350 6100
Wire Wire Line
	13000 6200 8350 6200
Wire Wire Line
	12250 1650 13150 1650
Wire Wire Line
	12250 1650 12250 3350
Wire Wire Line
	12250 3350 1450 3350
Wire Wire Line
	1450 3350 1450 5950
Wire Wire Line
	1450 5950 1850 5950
Wire Wire Line
	13150 2000 12500 2000
Wire Wire Line
	12500 2000 12500 3600
Wire Wire Line
	12500 3600 1700 3600
Wire Wire Line
	1700 3600 1700 5600
Wire Wire Line
	1700 5600 1850 5600
Wire Wire Line
	13150 2100 12550 2100
Wire Wire Line
	12550 2100 12550 3650
Wire Wire Line
	12550 3650 1750 3650
Wire Wire Line
	1750 3650 1750 5500
Wire Wire Line
	1750 5500 1850 5500
Wire Wire Line
	13150 1900 12400 1900
Wire Wire Line
	12400 1900 12400 3500
Wire Wire Line
	12400 3500 1600 3500
Wire Wire Line
	1600 3500 1600 5700
Wire Wire Line
	1600 5700 1850 5700
Wire Wire Line
	13150 1800 12350 1800
Wire Wire Line
	12350 1800 12350 3450
Wire Wire Line
	12350 3450 1550 3450
Wire Wire Line
	1550 3450 1550 5800
Wire Wire Line
	1550 5800 1850 5800
Wire Wire Line
	11700 1300 13150 1300
Wire Wire Line
	11700 1400 13150 1400
Wire Wire Line
	9850 1800 9300 1800
Wire Wire Line
	9850 2050 9300 2050
Wire Wire Line
	1200 8000 1850 8000
Connection ~ 1200 6550
Wire Wire Line
	1850 6100 1350 6100
Wire Wire Line
	1350 6100 1350 3250
Wire Wire Line
	1350 3250 12150 3250
Wire Wire Line
	12150 3250 12150 1300
Connection ~ 12150 1300
Wire Wire Line
	12100 1400 12100 3200
Wire Wire Line
	12100 3200 1300 3200
Wire Wire Line
	1300 3200 1300 6200
Wire Wire Line
	1300 6200 1850 6200
Connection ~ 12100 1400
$EndSCHEMATC
